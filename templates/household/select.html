{% extends "base.html" %}
{% from "_icons.html" import icon %}

{% block title %}Select Household - Lucky Ledger{% endblock %}

{% block content %}
<div class="max-w-lg mx-auto animate-fade-in">
    <div class="bg-white rounded-3xl shadow-lg border border-warm-200 p-8">
        <div class="text-center mb-8">
            <!-- Illustration -->
            <svg class="w-24 h-24 mx-auto text-terracotta-400 mb-4" viewBox="0 0 100 100" fill="none">
                <!-- Multiple houses -->
                <path d="M30 45L10 60V85H50V60L30 45Z" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                <rect x="22" y="70" width="16" height="15" rx="1" stroke="currentColor" stroke-width="2" fill="none"/>
                <circle cx="33" cy="77" r="1.5" fill="currentColor"/>

                <path d="M70 35L45 55V85H95V55L70 35Z" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                <rect x="60" y="65" width="20" height="20" rx="1" stroke="currentColor" stroke-width="2" fill="none"/>
                <circle cx="73" cy="75" r="2" fill="currentColor"/>

                <!-- Arrow between -->
                <path d="M40 55L50 55" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-dasharray="2 3"/>
            </svg>

            <h2 class="text-2xl font-bold font-display text-warm-800">Select a Household</h2>
            <p class="text-warm-500 mt-2">Choose which home you want to view</p>
        </div>

        <div class="space-y-3">
            {% for membership in households %}
            <form method="POST" action="{{ url_for('switch_household', household_id=membership.household.id) }}" class="block">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <button
                    type="submit"
                    class="w-full p-4 bg-cream-50 hover:bg-terracotta-50 border-2 border-warm-200 hover:border-terracotta-300 rounded-2xl text-left transition-all duration-200 group"
                >
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            {{ icon('cat-house', size='xl') }}
                            <div>
                                <h3 class="font-semibold text-warm-800 group-hover:text-terracotta-600">
                                    {{ membership.household.name }}
                                </h3>
                                <p class="text-sm text-warm-500">
                                    {{ membership.display_name }}
                                    {% if membership.role == 'owner' %}
                                    <span class="ml-2 px-2 py-0.5 bg-terracotta-100 text-terracotta-700 text-xs rounded-full font-medium flex items-center gap-1">{{ icon('cat-crown', size='sm') }} Owner</span>
                                    {% endif %}
                                </p>
                            </div>
                        </div>
                        <svg class="w-5 h-5 text-warm-300 group-hover:text-terracotta-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </div>
                </button>
            </form>
            {% endfor %}
        </div>

        <div class="mt-6 pt-6 border-t border-warm-100">
            <a
                href="{{ url_for('create_household') }}"
                class="flex items-center justify-center gap-2 w-full p-4 border-2 border-dashed border-warm-300 hover:border-terracotta-400 rounded-2xl text-warm-500 hover:text-terracotta-600 transition-all duration-200"
            >
                {{ icon('cat-sparkle', size='lg') }}
                <span class="font-medium">Create New Household</span>
            </a>
        </div>
    </div>
</div>
{% endblock %}
