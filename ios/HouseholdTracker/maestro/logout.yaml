appId: com.householdtracker.app
---
# Logout E2E Test
- launchApp:
    clearState: true

# Check if already logged in (might have keychain tokens)
- runFlow:
    when:
      visible: "Transactions"
    file: helpers/logout-helper.yaml

# Login first
- assertVisible: "Lucky Ledger"
- tapOn: "your@email.com"
- inputText: "demo_alice@example.com"
- tapOn: "Your password"
- inputText: "password123"
- tapOn: "Log In"

# Wait for main screen to fully load
- extendedWaitUntil:
    visible: "Transactions"
    timeout: 10000

# Small wait for UI to settle after login
- swipe:
    direction: UP
    duration: 100

# Navigate to Settings tab (tap the tab bar item)
- tapOn:
    text: "Settings"
    index: 0
    retryTapIfNoChange: true

# Wait for Settings screen to load
- extendedWaitUntil:
    visible: "Demo Alice"
    timeout: 5000

# Log Out button is at bottom of Settings, need to scroll
- scrollUntilVisible:
    element: "Log Out"
    direction: DOWN
    timeout: 5000
- tapOn: "Log Out"

# Verify back at login screen
- extendedWaitUntil:
    visible: "Lucky Ledger"
    timeout: 5000
