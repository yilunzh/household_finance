appId: com.householdtracker.app
---
# Logout E2E Test
- launchApp:
    clearState: true

# Check if already logged in (might have keychain tokens)
- runFlow:
    when:
      visible: "Transactions"
    file: helpers/logout-helper.yaml

# Login using helper
- assertVisible: "Lucky Ledger"
- runFlow:
    file: helpers/do-login.yaml

# Small wait for UI to settle after login
- swipe:
    direction: UP
    duration: 100

# Navigate to Settings tab (tap the tab bar item)
- tapOn:
    text: "Settings"
    index: 0
    retryTapIfNoChange: true

# Wait for Settings screen to load
- extendedWaitUntil:
    visible: "Demo Alice"
    timeout: 3000

# Log Out button is at bottom of Settings, need to scroll
- scrollUntilVisible:
    element: "Log Out"
    direction: DOWN
    timeout: 3000
- tapOn: "Log Out"

# Verify back at login screen
- extendedWaitUntil:
    visible: "Lucky Ledger"
    timeout: 3000
